<widget-host [(config)]="widgetProperties.config" [id]="widgetProperties.uuid" (configChange)="updateConfig($event)">
  <div class="text-generic-wrapper" (onResize)="onResized($event)">
    <widget-title [text]="widgetProperties.config.displayName" [color]="labelColor"/>

    <div class="filler">
      <canvas #dToLineCanvas class="canvas"></canvas>
    </div>
    <div class="buttons-container">
      <button mat-flat-button class="select-button" (click)="toggleMode()">&#8942;</button>
      @switch(mode) {
        @case(-1) {
          <span class="len-bias" [style.font-size]="infoFontSize">{{errorMessage}}</span>
        }
        @case(0) {
          <span class="info-container">
            <span class="pin" [style.font-size]="infoFontSize">{{portBiasValue}}</span>
            <span class="pin" [style.font-size]="infoFontSize">&nbsp;&nbsp;⚑</span>
            <span class="len-bias" [style.font-size]="infoFontSize">{{lineLengthValue}}</span>
            <span class="boat" [style.font-size]="infoFontSize">⚑&nbsp;&nbsp;</span>
            <span class="boat" [style.font-size]="infoFontSize">{{stbBiasValue}}</span>
          </span>
        }
        @case(1) {
          <button mat-flat-button class="port-button" (click)="setLineEnd('port')">Port End</button>
          <button mat-flat-button class="starboard-button" (click)="setLineEnd('stb')">Stbd End</button>
        }
        @case (2) {
          <button mat-flat-button class="port-small-button" (click)="adjustLineEnd('port', 5, 0)">+5m</button>
          <button mat-flat-button class="port-small-button" (click)="adjustLineEnd('port', -5, 0)">-5m</button>
          <button mat-flat-button class="starboard-small-button" (click)="adjustLineEnd('stb', -5, 0)">-5m</button>
          <button mat-flat-button class="starboard-small-button" (click)="adjustLineEnd('stb', 5, 0)">+5m</button>
        }
        @case (3) {
          <button mat-flat-button class="port-small-button" (click)="adjustLineEnd('port', 0, toRadians(1))">↑1&deg;</button>
          <button mat-flat-button class="port-small-button" (click)="adjustLineEnd('port', 0, toRadians(-1))">↓1&deg;</button>
          <button mat-flat-button class="starboard-small-button" (click)="adjustLineEnd('stb', 0, toRadians(1))">↓1&deg;</button>
          <button mat-flat-button class="starboard-small-button" (click)="adjustLineEnd('stb', 0, toRadians(-1))">↑1&deg;</button>
        }
      }
    </div>
  </div>
</widget-host>
