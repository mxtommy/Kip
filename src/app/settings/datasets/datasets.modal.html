<h2 mat-dialog-title> {{titleDialog}} </h2>
<mat-dialog-content>
  <form name="datasetForm" (ngSubmit)="closeForm()" #datasetForm="ngForm">
    <mat-horizontal-stepper>
      <mat-step>
        <ng-template matStepLabel>Source Data</ng-template>
        <div class="tab-content">
          <mat-form-field class="full-width">
            <mat-label>Signal K Path</mat-label>
            <mat-select
              placeholder="Select data path"
              [(ngModel)]="formDataset.path"
              name="selectedPath"
              (ngModelChange)="changePath()"
              required>
              <mat-option
                *ngFor="let path of (availablePaths | filterSelf: filterSelfPaths)"
                [value]="path">
                  {{path}}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-checkbox [(ngModel)]="filterSelfPaths" name="filterSelfPaths">
            Restrict to own vessel
          </mat-checkbox>
          <br/><br/>
          <mat-form-field class="full-width">
            <mat-label>Source</mat-label>
            <mat-select
              placeholder="Select data source"
              [(ngModel)]="formDataset.signalKSource"
              name="selectedSource"
              required
            >
              <mat-option
                *ngFor="let source of availableSources"
                [value]="source"
              >
                {{source}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <mat-divider></mat-divider>
        <div class="buttons">
          <button
            type="button"
            mat-raised-button
            color="accent"
            matStepperNext
            [disabled]="!formDataset.path"
          >
            Next
          </button>
        </div>
      </mat-step>
      <mat-step>
        <ng-template matStepLabel>Data Points</ng-template>
        <div class="tab-content">
          <mat-form-field class="full-width" style="margin-bottom: 10px;">
            <mat-label>Total most recent data points that makes the dataset</mat-label>
            <input
              matInput
              placeholder="Data Points"
              type="number"
              min="3"
              max="300"
              inputmode="numeric"
              step="1"
              name="maxDataPoints"
              [(ngModel)]="formDataset.maxDataPoints"
              required
            />
          </mat-form-field>
          <mat-form-field class="full-width" style="margin-bottom: 10px;">
            <mat-label>Dataset data sample time</mat-label>
            <input
              type="number"
              matInput
              placeholder="seconds"
              type="number"
              min="0.25"
              max="60"
              inputmode="numeric"
              step="any"
              name="sampleTime"
              [(ngModel)]="formDataset.sampleTime"
              required/>
          </mat-form-field>
          <label id="periodFactor-radio-group-label">Moving average period:</label>
          <mat-radio-group aria-labelledby="periodFactor-radio-group-label"
            [(ngModel)]="formDataset.periodFactor"
            placeholder="Smoothness"
            name="Smoothness">
            <mat-radio-button [value]="0.1">Short (best for quick average response)</mat-radio-button>
            <mat-radio-button [value]="0.2">Medium</mat-radio-button>
            <mat-radio-button [value]="0.3">Long (best for smoother average)</mat-radio-button>
          </mat-radio-group>

        </div>
        <mat-divider></mat-divider>
        <div class="buttons">
          <button
            type="button"
            mat-raised-button
            class="buttons"
            color="accent"
            matStepperPrevious
          >
            Back
          </button>
          <button
            mat-raised-button
            type="submit"
            class="buttons"
            color="accent"
            [disabled]="!datasetForm.valid"
          >
            Save
          </button>
        </div>
      </mat-step>
    </mat-horizontal-stepper>
  </form>
</mat-dialog-content>
