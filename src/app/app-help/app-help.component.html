<mat-tab-group class="tabGroup">

  <mat-tab label="Configuration Management">
    <h3>KIP Configuration</h3>
      <p>KIP can handle configuration in two different ways depending on your configuiration settings found in the "Signal K"
        tab located in the Configuration/Settings menu option at the lower right of the display.</p>
      <h4>Activating configuration sharing (default mode)</h4>
        <p> With "Enable user Sign in and configuration sharing" option activate, the configuration
          will automatically be retreived from the Signalk server storage upon startup. Any changes you make
          (layout, widgets, settings, etc.) will also be automatically saved to the server in real time.
          If you use multiple devices and browsers (computer, phones, tablets, Raspberry Pi, etc.), or you try
          a new device for the first time, it will get the most recent configuration automatically upon
          startup. This provides the ability to seamlessly share the configuration between all
          devices. There are minor caveats you need to be aware of with the option:
        </p>
        <ul>
          <li>You need to Sign in with a Signalk user to allow server storage of the KIP configuration.</li>
          <li>You need to first create a User in Signalk or use an existing user before enabling this option</li>
          <li>The configuration is stored within the server user storage space. This means you have to
            use the same credentials on all devices to share that user's configuration. Note that you could
            also have different credentials for different configuration arrangements such as, one for
            small and another for large form factor layouts.</li>
          <li>All confguration changes are saved in realtime but, there is no ability to notify other active
            KIP instances that they should update from the server storage in realtime or to restart the app
            automatically. This means you have to manually restart the active KIP instances
            to implement the changes. If you are not careful when using multiple simultaneous instances of
            KIP when editing shared configurations, you could end up overwriting and loosing your lastet
            changes. We recommend editing from one instance and restarting all other active instances
            to keep things simple.</li>
        </ul>
        <p>
          To use this feature, you need to follow a few simple steps. First is creating a user with "Admin Permissions" in
          Signalk:
        </p>
        <ol>
          <li>Go to Signalk server's Security/User menu to create a user with "Admin Permissions"</li>
          <li>Come back to Kip and go to the Configuration/Settings menu. In the "Signal K" tab, toggle
            the "Enable user Sign in and configuration sharing" option to Actice</li>
          <li>Click the "Set Sign in credentials" button and enter the previously created
              user ID and password</li>
          <li>Click the "Sign in" button</li>
        </ol>
        <p>From then on, the configuration will be shared. Remember to sign in with the same
          user and password on other devices to use that config! Have fun...</p>

      <h4>Disabling configuration sharing (legacy mode)</h4>
        <p>If "Enable user Sign in and configuration sharing" option is not active, the configuration
          will be stored in the local browser storage. Meaning each individual browsers you use,
          on all your different devices (computers, phones, tablets...) will have standalone configurations.
          You can still manually copy the local storage configurations to the server and manually retreive
          from other devices/browsers.</p>

        <p>To do so you must first have rigths to save configuration to the server using a Device
          Authorization Token. Follows those simple steps:</p>
        <ol>
          <li>Go to the Configuration/Settings menu in the "Signal K" tab and click the "Request Token"
            button</li>
          <li>Then go to the Signalk server Admin interface and approve the request in the Security/Access Requests menu</li>
        </ol>
        <p>Once approved, on the device with the
          configuration you want to copy, name the config and save it to the Global storage. Then use
          the other devices and load the config from the server. Note that the Device Authorization Token is only
          required on the device saving the configuration. IMPORTTANT: everytime you make a configuration
          change that you want to replicate, you must manually re-save and re-load on all devices.
        </p>
  </mat-tab>


  <mat-tab label="Editing Layout">
    <div *ngIf="!unlockStatus">
      <h3>Unlocking</h3>
      <p>
        The layout is "Locked" by default. This is to prevent accidental interaction from touch screens from changing anything.
        You can unlock KIP using the hamburger icon in the lower right corner and selecting "Configuration -> Edit Layout". Go Ahead try it now!
      </p>
    </div>
    <div *ngIf="unlockStatus">
      <h3>Configuring Layout</h3>
      <p>
        Now that KIP is unlocked, you can do a few actions.
      </p>
      <ul>
        <li>The icon in the lower right can be used to select the Widget you would like to display</li>
        <li>The icon in the lower left can be used to "split" the existing area. You can use this to display multiple items on one page</li>
        <li>The "X" in the upper right can be used to delete an area (basically undoing a split)</li>
        <li>Once a widget is selected, there will be a gear in the lower middle. Clicking it will allow you to setup the widget parameters</li>
        <li>You can drag the bars between widgits to resize them</li>
      </ul>
    </div>
  </mat-tab>


  <mat-tab label="Video Tutorials">
    <ng-template matTabContent>
      <mat-tab-group class="tabGroup">
        <mat-tab label="KIP">
          <mat-accordion>
            <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  5 Minutes with Kip (by Boating with the Baileys)
                </mat-panel-title>
                <mat-panel-description>
                  Introduction to using KIP
                </mat-panel-description>
              </mat-expansion-panel-header>
              <iframe width="560" height="315" src="https://www.youtube.com/embed/v6o4uK-Iq8s" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </mat-expansion-panel>

            <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Graphana embeded in KIP (by Boating with the Baileys)
                </mat-panel-title>
                <mat-panel-description>
                  Pretty graphs
                </mat-panel-description>
              </mat-expansion-panel-header>
              <iframe width="560" height="315" src="https://www.youtube.com/embed/S8FbtwBwW3w" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </mat-expansion-panel>

            <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Setting up zones in KIP (by Boating with the Baileys)
                </mat-panel-title>
                <mat-panel-description>
                  Warnings/Alarms
                </mat-panel-description>
              </mat-expansion-panel-header>
              <iframe width="560" height="315" src="https://www.youtube.com/embed/BJFjLzjlpuY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </mat-expansion-panel>

          </mat-accordion>

        </mat-tab>

        <mat-tab label="Graphana">
          <mat-accordion>
            <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  5 Minutes with Graphana (by Boating with the Baileys)
                </mat-panel-title>
                <mat-panel-description>
                  Introduction to using Graphana
                </mat-panel-description>
              </mat-expansion-panel-header>
              <iframe width="560" height="315" src="https://www.youtube.com/embed/b3lHwLnYgx0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </mat-expansion-panel>

            <mat-expansion-panel [expanded]="step === 3" (opened)="setStep(3)">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Signalk to InfluxDB (by Boating with the Baileys)
                </mat-panel-title>
                <mat-panel-description>
                  Database to store historical data
                </mat-panel-description>
              </mat-expansion-panel-header>
              <iframe width="560" height="315" src="https://www.youtube.com/embed/ULnN-cByQXE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </mat-expansion-panel>
          </mat-accordion>
        </mat-tab>

        <mat-tab label="OpenPlotter">
          <mat-accordion>
            <mat-expansion-panel [expanded]="step === 4" (opened)="setStep(4)">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  OpenPlotter (by Boating with the Baileys)
                </mat-panel-title>
                <mat-panel-description>
                  Installing OpenPlotter
                </mat-panel-description>
              </mat-expansion-panel-header>
              <iframe width="560" height="315" src="https://www.youtube.com/embed/Q0sEpgzhHTE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </mat-expansion-panel>

            <mat-expansion-panel [expanded]="step === 5" (opened)="setStep(5)">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  OpenPlotter instruction video (by Smart Sailing Boat)
                </mat-panel-title>
                <mat-panel-description>
                  Installing OpenPlotter
                </mat-panel-description>
              </mat-expansion-panel-header>
              <iframe width="560" height="315" src="https://www.youtube.com/embed/r8CGixMl18k" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </mat-expansion-panel>
          </mat-accordion>
        </mat-tab>

      </mat-tab-group>
    </ng-template>

  </mat-tab>
</mat-tab-group>


